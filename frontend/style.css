/* ── Reset & base ─────────────────────────────────────────────────────────── */
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

:root {
  --bg:        #0d1117;
  --surface:   #161b22;
  --border:    #30363d;
  --text:      #e6edf3;
  --muted:     #8b949e;
  --accent:    #FF9900;
  --accent-hov:#e68a00;
  --user-bg:   #1f3a5f;
  --bot-bg:    #1c2128;
  --error-bg:  #3d1515;
  --radius:    12px;
}

html, body { height: 100%; background: var(--bg); color: var(--text); font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif; font-size: 15px; line-height: 1.6; }

/* ── Layout ───────────────────────────────────────────────────────────────── */
.layout { display: flex; flex-direction: column; height: 100vh; max-width: 800px; margin: 0 auto; }

/* ── Header ───────────────────────────────────────────────────────────────── */
.header { display: flex; align-items: center; justify-content: space-between; padding: 12px 16px; background: var(--surface); border-bottom: 1px solid var(--border); flex-shrink: 0; }
.header-left { display: flex; align-items: center; gap: 10px; }
.logo { font-size: 24px; }
.brand { font-size: 16px; font-weight: 600; color: var(--accent); }
.session-toggle { background: none; border: 1px solid var(--border); color: var(--muted); padding: 6px 10px; border-radius: 6px; cursor: pointer; font-size: 16px; transition: color .2s, border-color .2s; }
.session-toggle:hover { color: var(--accent); border-color: var(--accent); }

/* ── Session Panel ────────────────────────────────────────────────────────── */
.session-panel { display: none; gap: 12px; padding: 12px 16px; background: var(--surface); border-bottom: 1px solid var(--border); flex-shrink: 0; }
.session-panel.open { display: flex; flex-wrap: wrap; align-items: flex-end; }
.session-panel label { display: flex; flex-direction: column; gap: 4px; font-size: 12px; color: var(--muted); }
.session-panel input { background: var(--bg); border: 1px solid var(--border); color: var(--text); padding: 6px 10px; border-radius: 6px; font-size: 13px; outline: none; width: 200px; }
.session-panel input:focus { border-color: var(--accent); }
.clear-btn { background: none; border: 1px solid var(--border); color: var(--muted); padding: 6px 14px; border-radius: 6px; cursor: pointer; font-size: 13px; align-self: flex-end; transition: color .2s, border-color .2s; }
.clear-btn:hover { color: #ff6b6b; border-color: #ff6b6b; }

/* ── Messages ─────────────────────────────────────────────────────────────── */
.messages { flex: 1; overflow-y: auto; padding: 20px 16px; display: flex; flex-direction: column; gap: 16px; }
.messages::-webkit-scrollbar { width: 6px; }
.messages::-webkit-scrollbar-track { background: transparent; }
.messages::-webkit-scrollbar-thumb { background: var(--border); border-radius: 3px; }

/* ── Welcome ──────────────────────────────────────────────────────────────── */
.welcome { text-align: center; padding: 40px 20px; color: var(--muted); }
.welcome-icon { font-size: 48px; margin-bottom: 12px; }
.welcome p { font-size: 15px; max-width: 400px; margin: 0 auto; }

/* ── Message bubbles ──────────────────────────────────────────────────────── */
.msg { display: flex; flex-direction: column; gap: 4px; max-width: 75%; }
.msg.user { align-self: flex-end; align-items: flex-end; }
.msg.bot  { align-self: flex-start; align-items: flex-start; }
.msg-label { font-size: 11px; color: var(--muted); padding: 0 4px; }
.bubble { padding: 10px 14px; border-radius: var(--radius); font-size: 14px; line-height: 1.6; white-space: pre-wrap; word-break: break-word; }
.msg.user .bubble { background: var(--user-bg); border-bottom-right-radius: 2px; }
.msg.bot  .bubble { background: var(--bot-bg); border: 1px solid var(--border); border-bottom-left-radius: 2px; }
.bubble.error { background: var(--error-bg); border-color: #ff6b6b; color: #ff6b6b; }
.bubble strong { color: var(--accent); }
.bubble code { background: #0d1117; border: 1px solid var(--border); padding: 1px 5px; border-radius: 4px; font-family: "SFMono-Regular", Consolas, monospace; font-size: 13px; }

/* ── Typing indicator ─────────────────────────────────────────────────────── */
.msg.typing .bubble { display: flex; gap: 5px; align-items: center; padding: 12px 14px; }
.dot { width: 7px; height: 7px; background: var(--muted); border-radius: 50%; animation: bounce 1.2s infinite; }
.dot:nth-child(2) { animation-delay: .2s; }
.dot:nth-child(3) { animation-delay: .4s; }
@keyframes bounce { 0%,80%,100% { transform: translateY(0); } 40% { transform: translateY(-6px); } }

/* ── Input row ────────────────────────────────────────────────────────────── */
.input-row { display: flex; align-items: flex-end; gap: 10px; padding: 12px 16px; background: var(--surface); border-top: 1px solid var(--border); flex-shrink: 0; }
#promptInput { flex: 1; background: var(--bg); border: 1px solid var(--border); color: var(--text); padding: 10px 14px; border-radius: var(--radius); font-size: 14px; font-family: inherit; resize: none; outline: none; max-height: 160px; overflow-y: auto; line-height: 1.5; transition: border-color .2s; }
#promptInput:focus { border-color: var(--accent); }
#promptInput::placeholder { color: var(--muted); }
.send-btn { background: var(--accent); border: none; color: #000; width: 40px; height: 40px; border-radius: 10px; cursor: pointer; display: flex; align-items: center; justify-content: center; flex-shrink: 0; transition: background .2s; }
.send-btn:hover:not(:disabled) { background: var(--accent-hov); }
.send-btn:disabled { opacity: .5; cursor: not-allowed; }

/* ── Spinner ──────────────────────────────────────────────────────────────── */
.spinner { width: 18px; height: 18px; border: 2px solid rgba(0,0,0,.3); border-top-color: #000; border-radius: 50%; animation: spin .7s linear infinite; }
@keyframes spin { to { transform: rotate(360deg); } }
.hidden { display: none !important; }

/* ── Responsive ───────────────────────────────────────────────────────────── */
@media (max-width: 600px) {
  .msg { max-width: 90%; }
  .session-panel input { width: 150px; }
}
